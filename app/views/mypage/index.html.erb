<div class="container">
    <div class="row">
      <div class="span3">
        <div id="user_profile">
          <%= image_tag(@user.prof_image, :size => "100x100") %>
          <div id="prof_user_name">
            <p><%= @user.name %></p>
            <% if @is_login_user then %>
            <div></div>
            <% else %>
            <% unless @is_already_following then%>
            <div id="follow_toggle">
            <%= link_to "follow", 
              {:action => "follow", :follow_user_id => @user.id,:remote => true}, 
              {:id => "follow_button", :class => "button button-rounded button-flat-primary"} %>
            </div>
            <% else %>
            <div id="follow_toggle">
              <%= link_to "unfollow", 
              {:action => "unfollow", :unfollow_user_id => @user.id, :remote => true}, 
              {:id => "unfollow_button", :class => "button button-rounded button-flat-primary"} %>
            </div>
            <% end %>
            <% end %>
            <hr/>
            <p>profile</p>
          </div>
          <div id="user_comment">
            <p><%= @user.comment %></p>
            </div>
          </div>
        <hr/>
        <div id="user_info_tab">
          <ul>
            <li class="prof_tab_elem none active">
              <a href="#prof_tab_following" data-toggle="tab">
                following<br>
                <%= @favorite_users.size %>
              </a>
              <div id="info_tab_marker"></div>
            </li>
            <li class="divider-vertical"></li>
            <li class="prof_tab_elem none">
              <a href="#prof_tab_followers" data-toggle="tab" id="followers_num">
                followers<br>
                <%= @followers.size %>
              </a>
              <div id="info_tab_marker"></div>
            </li>
            <li class="divider-vertical"></li>
            <li class="prof_tab_elem none">
              <a href="#prof_tab_summary" data-toggle="tab">
                summary<br>
                <!-- TODO : 動的に取る、そもそもsummaryでよいかも考える -->
                10
              </a>
              <div id="info_tab_marker"></div>
          </ul>
        </div>
        <hr/>
        <div id="user_info">
          <div id="prof_tab_following" class="active">
            <% if @favorite_users != nil then %>
            <% @favorite_users.each do |favorite_user| %>
            <%= link_to image_tag(favorite_user.prof_image, :size => "32x32", :title => favorite_user.name),
            {:action => "index", :name => favorite_user.name} %>
            <% end %>
            <% end %>
          </div>
          <div id="prof_tab_followers">
            <% if @followers != nil then %>
            <% @followers.each do |follower| %>
            <%= link_to image_tag(follower.prof_image, :size => "32x32", :title => follower.name),
            {:action => "index", :name => follower.name},
            {:id => "follower_id_"+follower.id.to_s } %>
            <% end %>
            <% end %>
          </div>
          <div id="prof_tab_summary">
          </div>
        </div>
      </div>
      <div class="span9">
        <div class="div_tag">
          <ul class="tab clear">
            <li class="none active my_overflow"><a href=".main" data-toggle="tab">Main</a></li>
            <li class="none my_overflow"><a href=".edited_summary" data-toggle="tab">Edited Summary</a></li>
            <li class="none my_overflow"><a href=".favorite" data-toggle="tab">Favorite</a></li>
            <li class="none my_overflow"><a href=".read" data-toggle="tab">Read</a></li>
          </ul>
        </div>
        <div id="article_controller">
        <% if @is_login_user then %>
          <div class="none active main">
            <div id="m_mark_as_read_btn">
              <%= image_tag("icons/glyphicons_152_check_gray.png", :size => "16x16", :class => "inner") + content_tag(:p, "mark as read", :class => "inner") %>
            </div>
            <div id="m_edit_summary_btn">
              <%= image_tag("icons/glyphicons_030_pencil_gray.png", :size => "16x16") + content_tag(:p, "edit summary") %>
            </div>
            <div id="m_mark_as_favorite_btn">
              <%= image_tag("icons/glyphicons_049_star_gray.png", :size => "16x16") + content_tag(:p, "mark as favorite") %>
            </div>
            <div id="m_delete_btn">
              <%= image_tag("icons/glyphicons_016_bin_gray.png", :size => "16x16") + content_tag(:p, "delete") %>
            </div>
          </div>
          <div class="none edited_summary">
            <div id="s_edit_summary_btn">
              <%= image_tag("icons/glyphicons_030_pencil_gray.png", :size => "16x16") + content_tag(:p, "edit summary") %>
            </div>
            <div id="s_delete_btn">
              <%= image_tag("icons/glyphicons_016_bin_gray.png", :size => "16x16") + content_tag(:p, "delete") %>
            </div>
          </div>
          <div class="none favorite">
            <div id="f_edit_summary_btn">
              <%= image_tag("icons/glyphicons_030_pencil_gray.png", :size => "16x16") + content_tag(:p, "edit summary") %>
            </div>
            <div id="f_mark_off_favorite_btn">
              <%= image_tag("icons/glyphicons_049_star_gray.png", :size => "16x16") + content_tag(:p, "mark off favorite") %>
            </div>
            <div id="f_delete_btn">
              <%= image_tag("icons/glyphicons_016_bin_gray.png", :size => "16x16") + content_tag(:p, "delete") %>
            </div>
          </div>
          <div class="none read">
            <div id="r_mark_as_unread_btn">
              <%= image_tag("icons/glyphicons_152_check_gray.png", :size => "16x16", :class => "inner") + content_tag(:p, "mark as unread", :class => "inner") %>
            </div>
            <div id="r_edit_summary_btn">
              <%= image_tag("icons/glyphicons_030_pencil_gray.png", :size => "16x16") + content_tag(:p, "edit summary") %>
            </div>
            <div id="r_mark_as_favorite_btn">
              <%= image_tag("icons/glyphicons_049_star_gray.png", :size => "16x16") + content_tag(:p, "mark as favorite") %>
            </div>
            <div id="r_delete_btn">
              <%= image_tag("icons/glyphicons_016_bin_gray.png", :size => "16x16") + content_tag(:p, "delete") %>
            </div>
          </div>
        <% else %>
          <div class="active">
            <div id="delete_btn">
              <%= image_tag("icons/glyphicons_062_paperclip_gray.png", :size => "16x16") + content_tag(:p, "clip") %>
            </div>
          </div>
        <% end %>
        </div>
        <div class="table">
          <table class="summary_table active main">
            <tr class="table_top">
              <th id="article_title_top">TITLE</th>
              <th id="summary_number_top">summary</th>
            </tr>
            <% if @articles %>
            <form name="main_checkbox">
              <% @articles.each_with_index do |article, i| %>
              <tr>
                <th class="title">
                  <% if @is_login_user then %>
                  <%= check_box 'check_article', i, 
                  {:class => "article_checkbox", :id => "article_check", :onclick => "clickMainCheckBox()"}, article.id, false %>
                  <% end %>
                  <a href="<%= article.url %>" target="_blank"><%= article.title %></a>
                </th>
                <th class="num_column"><%= link_to @main_summaries_num[i], 
                    {:controller => 'summary_lists', :action => 'index', :articleId => article.id} %>
                </th>
              </tr>
              <% end %>
            </form>
            <% end %>
          </table>
          <table class="edited_summary_table edited_summary">
            <tr class="table_top">
              <th id="article_title_top">TITLE</th>
              <th id="summary_number_top">like</th>
            </tr>
            <% if @edited_summaries %>
            <form name="summary_checkbox">
              <% @edited_summaries.each_with_index do |summary, i| %>
              <tr>
                <th class="title">
                  <% if false then %>
                  <input type="checkbox" id="article_check" class="dropdown-toggle" data-toggle="dropdown">
                  <ul class="dropdown-checkbox">
                    <li><%= link_to "delete", {:action => "delete_summary", :user_id => @user.id, 
                      :name => @user.name, :article_id => summary.id } %></li>
                      <li><%= link_to "revise", 
                      {:controller => "summary", :action => "edit", :article_id => summary.id} %>
                    </li>
                  </ul>
                  <% end %>

                  <% if @is_login_user then %>
                  <%= check_box 'check_article', i, 
                  {:class => "article_checkbox", :id => "summary_checkbox", :onclick => "clickSummaryCheckBox()"}, summary.id, false %>
                  <% end %>
                  <a href="<%= summary.url %>" target="_blank"><%= summary.title %></a>
                </th>
                <th class="num_column"><a href="#"><%= @like_num[i] %></a></th>
              </tr>
              <% end %>
            </form>
            <% end %>
          </table>
          <table class="favorite_table favorite">
            <tr class="table_top">
              <th id="article_title_top">TITLE</th>
              <th id="summary_number_top">summary</th>
            </tr>
          </table>
          <table class="read_table read">
            <tr class="table_top">
              <th id="article_title_top">TITLE</th>
              <th id="summary_number_top">summary</th>
            </tr>
            <% if @read_articles %>
            <form name="read_checkbox">
              <% @read_articles.each_with_index do |read_article, i| %>
              <tr>
                <th class="title">
                    <% if @is_login_user %>
                    <%= check_box 'check_article', i, 
                    {:class => "article_checkbox", :id => "read_checkbox", :onclick => "clickReadCheckBox()"}, read_article.id, false %>
                    <% end %>
                    <a href="<%= read_article.url %>" target="_blank"><%= read_article.title %></a>
                  </th>
                  <th class="num_column"><%= link_to @read_summaries_num[i], 
                  {:controller => 'summary_lists', :action => 'index', :articleId => read_article.id} %>
                </th>
              </tr>
              <% end %>
            </form>
            <% end %>
          </table>
        </div>
      </div>
    </div>
  </div>